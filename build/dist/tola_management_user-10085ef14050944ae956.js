(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{"5Xg7":function(e,t,r){"use strict";r.d(t,"a",function(){return m});var n=r("q1tI"),s=r.n(n),c=r("c7k8"),a=r("y2Vs");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var m=function(e){function r(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),(t=u(this,p(r).call(this,e))).cache=new c.c({fixedWidth:!0,defaultHeight:35}),t.filter_val="",t}var t,n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(r,s.a.PureComponent),t=r,(n=[{key:"render",value:function(){var o=this,e=this.props,i=(e.options,e.children),t=e.maxHeight,r=(e.getValue,e.selectProps),n=i.length||0;return r.inputValue!==this.filter_val&&(this.filter_val=r.inputValue,this.cache.clearAll()),s.a.createElement("div",{style:{display:"flex",height:"100vh",maxHeight:t+"px"}},s.a.createElement("div",{style:{flex:"1 1 auto"}},s.a.createElement(c.a,null,function(e){var t=e.width,r=e.height;return s.a.createElement(c.e,{height:r,width:t,deferredMeasurementCache:o.cache,rowCount:n,rowHeight:o.cache.rowHeight,noRowsRenderer:function(){return s.a.createElement("div",null,"No selections available")},rowRenderer:function(e){var t=e.index,r=e.parent,n=e.key,a=e.style;return s.a.createElement(c.b,{key:n,cache:o.cache,parent:r,columnIndex:0,rowIndex:t},s.a.createElement("div",{style:a},i[t]))}})})))}}])&&l(t.prototype,n),a&&l(t,a),r}();t.b=function(e){return s.a.createElement(a.b,i({components:{VirtualizedMenuList:m}},e))}},"9KAa":function(e,t,r){"use strict";r.r(t);var n=r("q1tI"),l=r.n(n),a=r("i8i4"),o=r.n(a),s=r("2vnA"),i=r("XoI5");var c,d,g,_,h,y,b,v,E,O,w,k,j,N,S,P,x,C,z,A,F,R,D,U,T,H,I,M,L,B,u=function(e,t){return i.a.get("/tola_management/user/",{params:function(a){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{},t=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(o).filter(function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable}))),t.forEach(function(e){var t,r,n;t=a,n=o[r=e],r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n})}return a}({page:e},t)}).then(function(e){var t=e.data,r=t.count,n=(t.results.length,t.page_count);return{users:t.results,total_pages:n,total_users:r,next_page:t.next,prev_page:t.previous}})},p=function(e){return i.a.get("/tola_management/user/".concat(e,"/")).then(function(e){return e.data})},f=function(e,t){return i.a.put("/tola_management/user/".concat(e,"/"),t).then(function(e){return e.data})},q=function(e){return i.a.get("/tola_management/user/".concat(e,"/program_access/")).then(function(e){return e.data})},V=function(e,t){return i.a.put("/tola_management/user/".concat(e,"/program_access/"),t).then(function(e){})},G=function(e){return i.a.get("/tola_management/user/".concat(e,"/history/")).then(function(e){return e.data})},X=function(e){return i.a.post("/tola_management/user/",e).then(function(e){return e.data})},K=function(e){return i.a.post("/tola_management/user/".concat(e,"/resend_registration_email/"),{}).then(function(e){return e.data})},W=function(e,t){return i.a.post("/tola_management/user/bulk_update_status/",{user_ids:e,new_status:t}).then(function(e){return e.data})},Y=function(e,t){return i.a.post("/tola_management/user/bulk_add_programs/",{user_ids:e,added_programs:t}).then(function(e){return e.data})},$=function(e,t){return i.a.post("/tola_management/user/bulk_remove_programs/",{user_ids:e,removed_programs:t}).then(function(e){return e.data})},J=function(e){return i.a.get("/tola_management/user/".concat(e,"/aggregate_data/")).then(function(e){return e.data})};function Z(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Q(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],n=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(n=(i=s.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{n||null==s.return||s.return()}finally{if(a)throw o}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function ee(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function te(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function m(r,n,e,t,a){var o={};return Object.keys(t).forEach(function(e){o[e]=t[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=e.slice().reverse().reduce(function(e,t){return t(r,n,e)||e},o),a&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(a):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(r,n,o),o=null),o}function re(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(e){ne(t,e,r[e])})}return t}function ne(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ae,oe={profile:re({},{id:null,first_name:"",last_name:"",email:"",phone_number:"",organization_id:null,mode_of_address:"",mode_of_contact:"",title:"",user_programs:0,user:{is_active:!0}}),access:{country:{},programs:[]},history:[]},ie=(d=m((c=function(){function m(e){var t=this,r=e.countries,n=e.organizations,a=e.programs,o=e.users,i=e.access,s=e.is_superuser,c=e.programs_filter,l=e.country_filter,u=e.organizations_filter,p=e.program_role_choices,f=e.country_role_choices;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,m),ee(this,"users",d,this),ee(this,"users_listing",g,this),ee(this,"users_count",_,this),ee(this,"fetching_users_listing",h,this),ee(this,"current_page",y,this),ee(this,"total_pages",b,this),ee(this,"bulk_targets",v,this),ee(this,"bulk_targets_all",E,this),ee(this,"applying_bulk_updates",O,this),ee(this,"saving_user_profile",w,this),ee(this,"saving_user_programs",k,this),ee(this,"access",j,this),ee(this,"is_superuser",N,this),ee(this,"fetching_editing_target",S,this),ee(this,"editing_target",P,this),ee(this,"editing_target_data",x,this),ee(this,"editing_errors",C,this),ee(this,"new_user",z,this),ee(this,"countries",A,this),ee(this,"ordered_country_ids",F,this),ee(this,"organizations",R,this),ee(this,"programs",D,this),ee(this,"available_users",U,this),ee(this,"countries_selections",T,this),ee(this,"organization_selections",H,this),ee(this,"program_selections",I,this),ee(this,"user_selections",M,this),ee(this,"program_bulk_selections",L,this),this.country_role_choices=[],this.program_role_choices=[],this.user_status_options=[{value:1,label:"Active"},{value:0,label:"Inactive"}],this.admin_role_options=[{value:1,label:"Yes"},{value:0,label:"No"}],ee(this,"filters",B,this),this.countries=r,this.ordered_country_ids=Object.values(r).sort(function(e,t){return e.name.localeCompare(t.name)}).map(function(e){return e.id}),this.organizations=n,this.programs=a,this.available_users=o.filter(function(e){return e.name}),this.countries_selections=this.ordered_country_ids.map(function(e){return t.countries[e]}).map(function(e){return{value:e.id,label:e.name}}),this.organization_selections=Object.values(n).map(function(e){return{value:e.id,label:e.name}}),this.program_selections=Object.values(a).map(function(e){return{value:e.id,label:e.name}}),this.user_selections=this.available_users.map(function(e){return{value:e.id,label:e.name}}),this.program_bulk_selections=this.ordered_country_ids.map(function(e){return t.countries[e]}).map(function(t){return{label:t.name,options:t.programs.map(function(e){return{label:t.name+": "+a[e].name,value:t.id+"_"+e}})}}),this.access=i,this.is_superuser=s,this.filters.programs=c.map(function(e){return t.programs[e]}).map(function(e){return{label:e.name,value:e.id}}),this.filters.organizations=u.map(function(e){return t.organizations[e]}).map(function(e){return{label:e.name,value:e.id}}),this.filters.countries=l.map(function(e){return t.countries[e]}).map(function(e){return{label:e.name,value:e.id}}),this.country_role_choices=f.map(function(e){var t=Q(e,2),r=t[0];return{label:t[1],value:r}}),this.program_role_choices=p.map(function(e){var t=Q(e,2),r=t[0];return{label:t[1],value:r}}),this.fetchUsers()}var e,t,r;return e=m,(t=[{key:"marshalFilters",value:function(e){return Object.entries(e).reduce(function(e,t){return Array.isArray(t[1])?e[t[0]]=t[1].map(function(e){return e.value}):e[t[0]]=t[1].value,e},{})}},{key:"getSelectedBulkTargetIDs",value:function(){return Z(this.bulk_targets.entries()).filter(function(e){var t=Q(e,2);t[0];return t[1]}).map(function(e){var t=Q(e,2),r=t[0];t[1];return r})}},{key:"onSaveErrorHandler",value:function(e){PNotify.error({text:e||gettext("Saving Failed"),delay:5e3})}},{key:"onSaveSuccessHandler",value:function(e){PNotify.success({text:e||gettext("Successfully Saved"),delay:5e3})}},{key:"fetchUsers",value:function(){var t=this;this.fetching_users_listing=!0,u(this.current_page+1,this.marshalFilters(this.filters)).then(function(e){Object(s.m)(function(){t.fetching_users_listing=!1,t.users=e.users.reduce(function(e,t){return e[t.id]=t,e},{}),t.users_listing=e.users.map(function(e){return e.id}),t.bulk_targets_all=!1,t.bulk_targets=new Map,t.users_count=e.total_users,t.total_pages=e.total_pages,t.next_page=e.next_page,t.previous_page=e.previous_page})})}},{key:"applyFilters",value:function(){this.current_page=0,this.fetchUsers()}},{key:"changePage",value:function(e){e.selected!=this.current_page&&(this.current_page=e.selected,this.fetchUsers())}},{key:"toggleBulkTargetsAll",value:function(){var t=this;this.bulk_targets_all=!this.bulk_targets_all;var e=Object.values(this.users_listing);this.bulk_targets=new Map(e.map(function(e){return[e,t.bulk_targets_all]}))}},{key:"toggleBulkTarget",value:function(e){this.bulk_targets.set(e,!this.bulk_targets.get(e))}},{key:"changeCountryFilter",value:function(e){this.filters.countries=e}},{key:"changeBaseCountryFilter",value:function(e){this.filters.base_countries=e}},{key:"changeOrganizationFilter",value:function(e){this.filters.organizations=e}},{key:"changeProgramFilter",value:function(e){this.filters.programs=e}},{key:"changeUserStatusFilter",value:function(e){this.filters.user_status=e}},{key:"changeAdminRoleFilter",value:function(e){this.filters.admin_role=e}},{key:"changeUserFilter",value:function(e){this.filters.users=e}},{key:"toggleEditingTarget",value:function(e){var o=this;this.editing_errors={},this.editing_target_data=re({},oe),"new"==this.editing_target&&this.users_listing.shift(),this.editing_target==e?this.editing_target=null:(this.editing_target=e,this.fetching_editing_target=!0,Promise.all([p(e),q(e),G(e)]).then(function(e){var t=Q(e,3),r=t[0],n=t[1],a=t[2];Object(s.m)(function(){o.fetching_editing_target=!1,o.editing_target_data={profile:r,access:n,history:a}})}))}},{key:"updateActiveEditPage",value:function(e){this.active_edit_page=e}},{key:"createUser",value:function(){this.editing_errors={},"new"==this.editing_target&&this.users_listing.shift(),this.editing_target_data=re({},oe),this.users.new={id:"new",name:"",organization_name:"",user_programs:0,is_admin:!1,is_active:!1},this.users_listing.unshift("new"),this.editing_target="new"}},{key:"updateUserProfile",value:function(e,t){var o=this;this.saving_user_profile=!0,this.editing_errors={},f(e,t).then(function(a){return Promise.all([J(a.id),G(a.id)]).then(function(e){var t=Q(e,2),r=t[0],n=t[1];o.onSaveSuccessHandler(),Object(s.m)(function(){o.saving_user_profile=!1,o.users[a.id]={id:a.id,name:a.name,organization_name:o.organizations[a.organization_id].name,user_programs:r.program_count,is_admin:a.user.is_staff,is_active:a.user.is_active},o.editing_target_data.profile=a,o.editing_target_data.history=n})})}).catch(function(e){o.onSaveErrorHandler(e.response.data.detail),Object(s.m)(function(){o.saving_user_profile=!1,o.editing_errors=e.response.data})})}},{key:"resendRegistrationEmail",value:function(e){var t=this;this.saving_user_profile=!0,K(e).then(function(e){Object(s.m)(function(){t.saving_user_profile=!1,t.onSaveSuccessHandler(gettext("Verification email sent"))})}).catch(function(){t.onSaveSuccessHandler(gettext("Verification email send failed"))})}},{key:"saveNewUser",value:function(e){var r=this;this.saving_user_profile=!0,this.editing_errors={},X(e).then(function(t){return J(t.id).then(function(e){r.onSaveSuccessHandler(),Object(s.m)(function(){r.saving_user_profile=!1,r.users[t.id]={id:t.id,name:t.name,organization_name:r.organizations[t.organization_id].name,user_programs:e.program_count,is_admin:t.user.is_staff,is_active:t.user.is_active},r.user_selections.push({value:t.id,label:t.name}),r.users_listing[0]=t.id,r.editing_target=null,r.toggleEditingTarget(t.id),delete r.users.new})})}).catch(function(e){r.onSaveErrorHandler(e.response.data.detail),Object(s.m)(function(){r.saving_user_profile=!1,r.editing_errors=e.response.data})})}},{key:"saveNewUserAndAddAnother",value:function(e){var r=this;this.saving_user_profile=!0,this.editing_errors={},X(e).then(function(t){return J(t.id).then(function(e){r.onSaveSuccessHandler(),Object(s.m)(function(){r.saving_user_profile=!1,r.users[t.id]={id:t.id,name:t.name,organization_name:r.organizations.find(function(e){return e.id=t.organization_id}).name,user_programs:e.program_count,is_admin:t.user.is_staff,is_active:t.user.is_active},r.users_listing[0]=t.id,delete r.users.new,r.createUser()})})}).catch(function(e){r.onSaveErrorHandler(e.response.data.detail),Object(s.m)(function(){r.saving_user_profile=!1,r.editing_errors=e.response.data})})}},{key:"saveUserPrograms",value:function(o,e){var i=this;this.saving_user_programs=!0,V(o,e).then(function(e){return Promise.all([J(o),G(o),q(o)]).then(function(e){var t=Q(e,3),r=t[0],n=t[1],a=t[2];Object(s.m)(function(){i.saving_user_programs=!1,i.users[o].user_programs=r.program_count,i.editing_target_data.history=n,i.editing_target_data.access=a}),i.onSaveSuccessHandler()})}).catch(function(e){i.onSaveErrorHandler(e.response.data.detail),Object(s.m)(function(){i.saving_user_programs=!1})})}},{key:"bulkUpdateUserStatus",value:function(e){var r=this;this.applying_bulk_updates=!0,W(this.getSelectedBulkTargetIDs(),e).then(function(e){Object(s.m)(function(){e.forEach(function(e){var t=Object.assign(r.users[e.id],e);r.users[t.id]=t}),r.applying_bulk_updates=!1}),r.onSaveSuccessHandler()}).catch(function(e){Object(s.m)(function(){r.applying_bulk_updates=!1}),r.onSaveErrorHandler()})}},{key:"bulkAddPrograms",value:function(e){var a=this;this.applying_bulk_updates=!0,Y(this.getSelectedBulkTargetIDs(),e.map(function(e){var t=Q(e.split("_"),2);return{country:t[0],program:t[1],role:"low"}})).then(function(e){a.getSelectedBulkTargetIDs().forEach(function(e){a.editing_target==e&&q(e).then(function(e){Object(s.m)(function(){a.editing_target_data.access=e})})}),Object(s.m)(function(){Object.entries(e).forEach(function(e){var t=Q(e,2),r=t[0],n=t[1];a.users[r].user_programs=n}),a.applying_bulk_updates=!1}),a.onSaveSuccessHandler()}).catch(function(e){Object(s.m)(function(){a.applying_bulk_updates=!1}),a.onSaveErrorHandler()})}},{key:"bulkRemovePrograms",value:function(e){var a=this;this.applying_bulk_updates=!0,$(this.getSelectedBulkTargetIDs(),e.map(function(e){var t=Q(e.split("_"),2);return{country:t[0],program:t[1],role:"low"}})).then(function(e){a.getSelectedBulkTargetIDs().forEach(function(e){a.editing_target==e&&q(e).then(function(e){Object(s.m)(function(){a.editing_target_data.access=e})})}),Object(s.m)(function(){Object.entries(e).forEach(function(e){var t=Q(e,2),r=t[0],n=t[1];a.users[r].user_programs=n}),a.applying_bulk_updates=!1}),a.onSaveSuccessHandler()}).catch(function(e){Object(s.m)(function(){a.applying_bulk_updates=!1}),a.onSaveErrorHandler()})}},{key:"clearFilters",value:function(){this.filters={countries:[],base_countries:[],organizations:[],programs:[],user_status:"",admin_role:"",users:[]}}}])&&te(e.prototype,t),r&&te(e,r),m}()).prototype,"users",[s.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),g=m(c.prototype,"users_listing",[s.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),_=m(c.prototype,"users_count",[s.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=m(c.prototype,"fetching_users_listing",[s.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),y=m(c.prototype,"current_page",[s.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),b=m(c.prototype,"total_pages",[s.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=m(c.prototype,"bulk_targets",[s.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),E=m(c.prototype,"bulk_targets_all",[s.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),O=m(c.prototype,"applying_bulk_updates",[s.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),w=m(c.prototype,"saving_user_profile",[s.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),k=m(c.prototype,"saving_user_programs",[s.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),j=m(c.prototype,"access",[s.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{countries:{},programs:{}}}}),N=m(c.prototype,"is_superuser",[s.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),S=m(c.prototype,"fetching_editing_target",[s.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),P=m(c.prototype,"editing_target",[s.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=m(c.prototype,"editing_target_data",[s.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return re({},oe)}}),C=m(c.prototype,"editing_errors",[s.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),z=m(c.prototype,"new_user",[s.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=m(c.prototype,"countries",[s.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),F=m(c.prototype,"ordered_country_ids",[s.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),R=m(c.prototype,"organizations",[s.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),D=m(c.prototype,"programs",[s.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),U=m(c.prototype,"available_users",[s.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),T=m(c.prototype,"countries_selections",[s.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),H=m(c.prototype,"organization_selections",[s.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),I=m(c.prototype,"program_selections",[s.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),M=m(c.prototype,"user_selections",[s.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),L=m(c.prototype,"program_bulk_selections",[s.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),B=m(c.prototype,"filters",[s.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{countries:[],base_countries:[],organizations:[],programs:[],user_status:"",admin_role:"",users:[]}}}),m(c.prototype,"fetchUsers",[s.d],Object.getOwnPropertyDescriptor(c.prototype,"fetchUsers"),c.prototype),m(c.prototype,"applyFilters",[s.d],Object.getOwnPropertyDescriptor(c.prototype,"applyFilters"),c.prototype),m(c.prototype,"changePage",[s.d],Object.getOwnPropertyDescriptor(c.prototype,"changePage"),c.prototype),m(c.prototype,"toggleBulkTargetsAll",[s.d],Object.getOwnPropertyDescriptor(c.prototype,"toggleBulkTargetsAll"),c.prototype),m(c.prototype,"toggleBulkTarget",[s.d],Object.getOwnPropertyDescriptor(c.prototype,"toggleBulkTarget"),c.prototype),m(c.prototype,"changeCountryFilter",[s.d],Object.getOwnPropertyDescriptor(c.prototype,"changeCountryFilter"),c.prototype),m(c.prototype,"changeBaseCountryFilter",[s.d],Object.getOwnPropertyDescriptor(c.prototype,"changeBaseCountryFilter"),c.prototype),m(c.prototype,"changeOrganizationFilter",[s.d],Object.getOwnPropertyDescriptor(c.prototype,"changeOrganizationFilter"),c.prototype),m(c.prototype,"changeProgramFilter",[s.d],Object.getOwnPropertyDescriptor(c.prototype,"changeProgramFilter"),c.prototype),m(c.prototype,"changeUserStatusFilter",[s.d],Object.getOwnPropertyDescriptor(c.prototype,"changeUserStatusFilter"),c.prototype),m(c.prototype,"changeAdminRoleFilter",[s.d],Object.getOwnPropertyDescriptor(c.prototype,"changeAdminRoleFilter"),c.prototype),m(c.prototype,"changeUserFilter",[s.d],Object.getOwnPropertyDescriptor(c.prototype,"changeUserFilter"),c.prototype),m(c.prototype,"toggleEditingTarget",[s.d],Object.getOwnPropertyDescriptor(c.prototype,"toggleEditingTarget"),c.prototype),m(c.prototype,"updateActiveEditPage",[s.d],Object.getOwnPropertyDescriptor(c.prototype,"updateActiveEditPage"),c.prototype),m(c.prototype,"createUser",[s.d],Object.getOwnPropertyDescriptor(c.prototype,"createUser"),c.prototype),m(c.prototype,"updateUserProfile",[s.d],Object.getOwnPropertyDescriptor(c.prototype,"updateUserProfile"),c.prototype),m(c.prototype,"resendRegistrationEmail",[s.d],Object.getOwnPropertyDescriptor(c.prototype,"resendRegistrationEmail"),c.prototype),m(c.prototype,"saveNewUser",[s.d],Object.getOwnPropertyDescriptor(c.prototype,"saveNewUser"),c.prototype),m(c.prototype,"saveNewUserAndAddAnother",[s.d],Object.getOwnPropertyDescriptor(c.prototype,"saveNewUserAndAddAnother"),c.prototype),m(c.prototype,"saveUserPrograms",[s.d],Object.getOwnPropertyDescriptor(c.prototype,"saveUserPrograms"),c.prototype),m(c.prototype,"bulkUpdateUserStatus",[s.d],Object.getOwnPropertyDescriptor(c.prototype,"bulkUpdateUserStatus"),c.prototype),m(c.prototype,"bulkAddPrograms",[s.d],Object.getOwnPropertyDescriptor(c.prototype,"bulkAddPrograms"),c.prototype),m(c.prototype,"bulkRemovePrograms",[s.d],Object.getOwnPropertyDescriptor(c.prototype,"bulkRemovePrograms"),c.prototype),m(c.prototype,"clearFilters",[s.d],Object.getOwnPropertyDescriptor(c.prototype,"clearFilters"),c.prototype),c),se=r("okNM"),ce=r("y2Vs"),le=r("Z2Y6"),ue=r("TGVD");function pe(e){return(pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function me(e,t){return!t||"object"!==pe(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function de(e){return(de=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ge(e,t){return(ge=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var _e,he=Object(se.a)(ae=function(e){function r(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),(t=me(this,de(r).call(this,e))).state={active_page:"profile"},t}var t,n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ge(e,t)}(r,l.a.Component),t=r,(n=[{key:"updateActivePage",value:function(e){this.props.new||this.setState({active_page:e})}},{key:"render",value:function(){var e=this,t=this.props,r=t.ProfileSection,n=t.ProgramSection,a=t.HistorySection,o="profile"==this.state.active_page?"selected":"",i="programs_and_roles"==this.state.active_page?"selected":"",s="status_and_history"==this.state.active_page?"selected":"",c=this.props.new?"disabled":"";return l.a.createElement("div",{className:"user-editor row"},l.a.createElement("div",{className:"editor__navigation col-sm-3"},l.a.createElement("ul",{className:"list-group"},l.a.createElement("li",{className:"list-group-item ".concat(o),onClick:function(){return e.updateActivePage("profile")}},gettext("Profile")),l.a.createElement("li",{className:"list-group-item ".concat(i," ").concat(c),onClick:function(){return e.updateActivePage("programs_and_roles")}},gettext("Programs and Roles")),l.a.createElement("li",{className:"list-group-item ".concat(s," ").concat(c),onClick:function(){return e.updateActivePage("status_and_history")}},gettext("Status and History")))),l.a.createElement("div",{className:"user-editor__content col-sm-9"},"profile"==this.state.active_page&&l.a.createElement(r,null),"programs_and_roles"==this.state.active_page&&l.a.createElement(n,null),"status_and_history"==this.state.active_page&&l.a.createElement(a,null)))}}])&&fe(t.prototype,n),a&&fe(t,a),r}())||ae;function ye(e){return(ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function be(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(e){ve(t,e,r[e])})}return t}function ve(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ee(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Oe(e,t){return!t||"object"!==ye(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function we(e){return(we=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ke(e,t){return(ke=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var je,Ne=Object(se.a)(_e=function(e){function o(t){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),e=Oe(this,we(o).call(this,t));var r=t.userData,n=t.new?t.organizations.filter(function(e){return 1!=e.value||t.is_superuser}):t.organizations,a=n.find(function(e){return e.value==r.organization_id});return e.state={original_user_data:be({},r),managed_user_data:be({},r),selected_organization:a,organization_listing:n},e}var t,r,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ke(e,t)}(o,l.a.Component),t=o,(r=[{key:"save",value:function(e){e.preventDefault(),this.props.onUpdate(this.state.managed_user_data)}},{key:"saveNew",value:function(e){e.preventDefault(),this.props.onCreate(this.state.managed_user_data)}},{key:"saveNewAndAddAnother",value:function(e){e.preventDefault(),this.props.onCreateAndAddAnother(this.state.managed_user_data)}},{key:"updateFirstName",value:function(e){this.setState({managed_user_data:be({},this.state.managed_user_data,{first_name:e})})}},{key:"updateLastName",value:function(e){this.setState({managed_user_data:be({},this.state.managed_user_data,{last_name:e})})}},{key:"updateModeOfAddress",value:function(e){this.setState({managed_user_data:be({},this.state.managed_user_data,{mode_of_address:e})})}},{key:"updateOrganization",value:function(e){this.setState({managed_user_data:be({},this.state.managed_user_data,{organization_id:e.value}),selected_organization:e})}},{key:"updateTitle",value:function(e){this.setState({managed_user_data:be({},this.state.managed_user_data,{title:e})})}},{key:"updateEmail",value:function(e){this.setState({managed_user_data:be({},this.state.managed_user_data,{email:e})})}},{key:"updatePhone",value:function(e){this.setState({managed_user_data:be({},this.state.managed_user_data,{phone:e})})}},{key:"updateModeOfContact",value:function(e){this.setState({managed_user_data:be({},this.state.managed_user_data,{mode_of_contact:e})})}},{key:"resetForm",value:function(){var t=this,e=this.state.organization_listing.find(function(e){return e.value==t.state.original_user_data.organization_id});this.setState({managed_user_data:this.state.original_user_data,selected_organization:e})}},{key:"render",value:function(){var t=this,e=this.state.managed_user_data,r=this.props.errors,n=this.props.disabled,a=r.first_name?"is-invalid":"",o=r.last_name?"is-invalid":"",i=r.email?"is-invalid":"",s=r.organization_id?"is-invalid":"";return l.a.createElement("div",{className:"edit-user-profile container"},l.a.createElement("form",{className:"form"},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"user-first-name-input"},gettext("Preferred First Name"),l.a.createElement("span",{className:"required"},"*")),l.a.createElement("input",{disabled:n,className:"form-control "+a,type:"text",value:e.first_name,onChange:function(e){return t.updateFirstName(e.target.value)},id:"user-first-name-input",required:!0}),r.name&&l.a.createElement("div",{className:"invalid-feedback"},r.name)),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"user-last-name-input"},gettext("Preferred Last Name"),l.a.createElement("span",{className:"required"},"*")),l.a.createElement("input",{disabled:n,className:"form-control "+o,type:"text",value:e.last_name,onChange:function(e){return t.updateLastName(e.target.value)},id:"user-last-name-input",required:!0}),r.name&&l.a.createElement("div",{className:"invalid-feedback"},r.name)),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"user-mode-of-address-input"},gettext("Preferred Mode Of Address")),l.a.createElement("input",{type:"text",disabled:n,value:e.mode_of_address,onChange:function(e){return t.updateModeOfAddress(e.target.value)},className:"form-control",id:"user-mode-of-address-input"})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"user-organization-input"},gettext("Organization"),l.a.createElement("span",{className:"required"},"*")),l.a.createElement(ce.b,{isDisabled:n,className:"form-control "+s,value:this.state.selected_organization,options:this.state.organization_listing,onChange:function(e){return t.updateOrganization(e)},placeholder:"None Selected",id:"user-organization-input"}),r.organization_id&&l.a.createElement("div",{className:"invalid-feedback"},r.organization_id)),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"user-title-input"},gettext("Title")),l.a.createElement("input",{disabled:n,maxLength:"50",type:"text",value:e.title,onChange:function(e){return t.updateTitle(e.target.value)},className:"form-control",id:"user-title-input"})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"user-email-input"},gettext("Email"),l.a.createElement("span",{className:"required"},"*")),l.a.createElement("input",{disabled:n,className:"form-control "+i,type:"email",value:e.email,onChange:function(e){return t.updateEmail(e.target.value)},id:"user-email-input"}),r.email&&l.a.createElement("div",{className:"invalid-feedback"},r.email)),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"user-phone-input"},gettext("Phone")),l.a.createElement("input",{disabled:n,type:"tel",value:e.phone,onChange:function(e){return t.updatePhone(e.target.value)},className:"form-control",id:"user-phone-input"})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"user-mode-of-contact-input"},gettext("Preferred Mode of Contact")),l.a.createElement("input",{disabled:n,type:"text",value:e.mode_of_contact,onChange:function(e){return t.updateModeOfContact(e.target.value)},className:"form-control",id:"user-mode-of-contact-input"})),this.props.new&&!n&&l.a.createElement("div",{className:"form-group btn-row"},l.a.createElement("button",{className:"btn btn-primary",onClick:function(e){return t.saveNew(e)}},gettext("Save changes")),l.a.createElement("button",{className:"btn btn-secondary",onClick:function(e){return t.saveNewAndAddAnother(e)}},gettext("Save And Add Another")),l.a.createElement("button",{className:"btn btn-reset",type:"button",onClick:function(){return t.resetForm()}},gettext("Reset"))),!this.props.new&&!n&&l.a.createElement("div",{className:"form-group btn-row"},l.a.createElement("button",{className:"btn btn-primary",onClick:function(e){return t.save(e)}},gettext("Save changes")),l.a.createElement("button",{className:"btn btn-reset",type:"button",onClick:function(){return t.resetForm()}},gettext("Reset")))))}}])&&Ee(t.prototype,r),n&&Ee(t,n),o}())||_e,Se=r("c7k8"),Pe=r("5Xg7");function xe(e){return(xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ce(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ze(e,t){return!t||"object"!==xe(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function Ae(e){return(Ae=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Fe(e,t){return(Fe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Re(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function De(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(e){Ue(t,e,r[e])})}return t}function Ue(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Te(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],n=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(n=(i=s.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{n||null==s.return||s.return()}finally{if(a)throw o}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var He=function(e,o){return Object.entries(e).reduce(function(e,t){var r=Te(t,2),n=r[0],a=r[1];return De({},e,Ue({},n,De({},a,{type:"country",options:o.country_role_choices,admin_access:o.is_superuser,programs:new Set(a.programs)})))},{})},Ie=function(e,n){return Object.entries(e).reduce(function(e,t){var r=Te(t,2);return De({},e,Ue({},r[0],De({},r[1],{type:"program",options:n.program_role_choices})))},{})},Me=function(e,r){return e.flatMap(function(t){return[t].concat(Re(Array.from(t.programs).filter(function(e){return r[e]}).map(function(e){return De({},r[e],{id:"".concat(t.id,"_").concat(e),country_id:t.id})})))})},Le=function(e,t,r){if(!r)return{programs:e,countries:t};var n=Object.entries(e).filter(function(e){var t=Te(e,2);t[0];return t[1].name.toLowerCase().includes(r.toLowerCase())}).map(function(e){var t=Te(e,2);t[0];return t[1]});return{countries:Object.entries(t).filter(function(e){var t=Te(e,2),r=(t[0],t[1]);return n.some(function(e){return r.programs.has(e.id)})}).map(function(e){var t=Te(e,2);t[0];return t[1]}).reduce(function(e,t){return De({},e,Ue({},t.id,t))},{}),programs:n.reduce(function(e,t){return De({},e,Ue({},t.id,t))},{})}},Be=function(t,e){return 0<e.length?e.filter(function(e){return t[e.value]}).map(function(e){return t[e.value]}).reduce(function(e,t){return De({},e,Ue({},t.id,t))},{}):t},qe=function(e){return{countries:Object.entries(e.countries).reduce(function(e,t){var r=Te(t,2);return De({},e,Ue({},r[0],De({},r[1],{has_access:!0})))},{}),programs:e.programs.reduce(function(e,t){return De({},e,Ue({},"".concat(t.country,"_").concat(t.program),De({},t,{has_access:!0})))},{})}},Ve=function(t,r,n){return Array.from(t.programs).filter(function(e){return!!r[e]}).every(function(e){return n.programs["".concat(t.id,"_").concat(e)]&&n.programs["".concat(t.id,"_").concat(e)].has_access})},Ge=Object(se.a)(je=function(e){function o(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),t=ze(this,Ae(o).call(this,e));var r=e.store,n=He(r.countries,r),a=Ie(r.programs,r);return t.state={program_filter:"",country_filter:[],country_selections:Object.entries(r.countries).map(function(e){var t=Te(e,2),r=(t[0],t[1]);return{value:r.id,label:r.name}}),countries:n,programs:a,filtered_countries:n,filtered_programs:a,ordered_country_ids:r.ordered_country_ids,flattened_programs:Me(r.ordered_country_ids.filter(function(e){return e in n}).map(function(e){return n[e]}),a),original_user_program_access:qe(r.editing_target_data.access),user_program_access:qe(r.editing_target_data.access)},t}var t,r,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Fe(e,t)}(o,l.a.Component),t=o,(r=[{key:"componentWillReceiveProps",value:function(e){var t=e.store,r=He(t.countries,t),n=Ie(t.programs,t),a=Be(r,this.state.country_filter),o=Le(n,a,this.state.program_filter),i=o.countries,s=o.programs;this.setState({countries:r,programs:n,country_selections:Object.entries(t.countries).map(function(e){var t=Te(e,2),r=(t[0],t[1]);return{value:r.id,label:r.name}}),filtered_countries:i,filtered_programs:s,ordered_country_ids:t.ordered_country_ids,flattened_programs:Me(t.ordered_country_ids.filter(function(e){return e in i}).map(function(e){return i[e]}),s),original_user_program_access:qe(t.editing_target_data.access),user_program_access:qe(t.editing_target_data.access)})}},{key:"saveForm",value:function(){var r=this,e=this.state.user_program_access;this.props.onSave({countries:Object.entries(e.countries).filter(function(e){var t=Te(e,2);t[0],t[1];return r.props.store.is_superuser}).reduce(function(e,t){var r=Te(t,2);return De({},e,Ue({},r[0],r[1]))},{}),programs:Object.entries(e.programs).filter(function(e){var t=Te(e,2);t[0];return t[1].has_access}).map(function(e){var t=Te(e,2);t[0];return t[1]})})}},{key:"resetForm",value:function(){this.setState({user_program_access:{countries:De({},this.state.original_user_program_access.countries),programs:De({},this.state.original_user_program_access.programs)}})}},{key:"toggleProgramAccess",value:function(t){var r=this.state.user_program_access.programs,e=function(){if(r[t])return De({},r[t],{has_access:!r[t].has_access});var e=Te(t.split("_"),2);return{country:e[0],program:e[1],role:"low",has_access:!0}}();this.setState({user_program_access:De({},this.state.user_program_access,{programs:De({},r,Ue({},t,e))})})}},{key:"toggleAllProgramsForCountry",value:function(e){var a=this,o=this.state.countries[e],t=Ve(o,a.state.filtered_programs,a.state.user_program_access)?Array.from(o.programs).filter(function(e){return!!a.state.filtered_programs[e]}).reduce(function(e,t){var r="".concat(o.id,"_").concat(t),n=a.state.user_program_access.programs[r];return n?De({},e,Ue({},r,De({},n,{has_access:!1}))):e},{}):Array.from(o.programs).filter(function(e){return!!a.state.filtered_programs[e]}).reduce(function(e,t){var r="".concat(o.id,"_").concat(t),n=a.state.user_program_access.programs[r];return De({},e,Ue({},r,n?De({},n,{has_access:!0}):{program:t,country:o.id,role:"low",has_access:!0}))},{});this.setState({user_program_access:De({},this.state.user_program_access,{programs:De({},this.state.user_program_access.programs,t)})})}},{key:"changeCountryRole",value:function(e,t){var r=this.state.user_program_access.countries[e],n=r?De({},r,{role:t}):{role:t};this.setState({user_program_access:De({},this.state.user_program_access,{countries:De({},this.state.user_program_access.countries,Ue({},e,n))})})}},{key:"changeProgramRole",value:function(e,t){var r=De({},this.state.user_program_access.programs[e],{role:t});this.setState({user_program_access:De({},this.state.user_program_access,{programs:De({},this.state.user_program_access.programs,Ue({},e,r))})})}},{key:"clearFilter",value:function(){var e=Be(this.state.countries,this.state.country_filter),t=Le(this.state.programs,e,""),r=t.countries,n=t.programs;this.setState({program_filter:"",filtered_programs:n,filtered_countries:r,flattened_programs:Me(this.state.ordered_country_ids.filter(function(e){return e in r}).map(function(e){return r[e]}),n)})}},{key:"updateProgramFilter",value:function(e){var t=Be(this.state.countries,this.state.country_filter),r=Le(this.state.programs,t,e),n=r.countries,a=r.programs;this.setState({program_filter:e,filtered_programs:a,filtered_countries:n,flattened_programs:Me(this.state.ordered_country_ids.filter(function(e){return e in n}).map(function(e){return n[e]}),a)})}},{key:"changeCountryFilter",value:function(e){var t=Be(this.state.countries,e),r=Le(this.state.programs,t,this.state.program_filter),n=r.countries;r.programs;this.setState({country_filter:e,filtered_countries:n,flattened_programs:Me(this.state.ordered_country_ids.filter(function(e){return e in n}).map(function(e){return n[e]}),this.state.filtered_programs)})}},{key:"render",value:function(){var o=this,e=this.props,t=e.user;e.onSave;return l.a.createElement("div",{className:"edit-user-programs"},l.a.createElement("h2",null,t.name,": Programs and Roles"),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col"},l.a.createElement("div",{className:"edit-user-programs__filter-form form-inline"},l.a.createElement("div",{className:"edit-user-programs__country-filter form-group"},l.a.createElement(Pe.b,{placeholder:gettext("Filter countries"),isMulti:!0,value:this.state.country_filter,options:this.state.country_selections,onChange:function(e){return o.changeCountryFilter(e)}})),l.a.createElement("div",{className:"form-group edit-user-programs__program-filter"},l.a.createElement("div",{className:"input-group"},l.a.createElement("input",{placeholder:gettext("Filter programs"),type:"text",value:this.state.program_filter,className:"form-control",onChange:function(e){return o.updateProgramFilter(e.target.value)}}),l.a.createElement("div",{className:"input-group-append"},l.a.createElement("a",{onClick:function(e){e.preventDefault(),o.clearFilter()}},l.a.createElement("span",{className:"input-group-text"},l.a.createElement("i",{className:"fa fa-times-circle"}))))))))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col"},l.a.createElement("div",{className:"virtualized-table__wrapper"},l.a.createElement(Se.a,null,function(e){var t=e.height,r=e.width;return l.a.createElement(Se.f,{height:t,headerHeight:50,width:r,rowGetter:function(e){var t=e.index;return o.state.flattened_programs[t]},rowHeight:50,rowCount:o.state.flattened_programs.length},l.a.createElement(Se.d,{dataKey:"not_applicable_but_required",width:100,cellDataGetter:function(e){var t,r,n,a=e.rowData;return{checked:(r=a,n=o.state.user_program_access,"country"==r.type?n.countries[r.id]&&n.countries[r.id].has_access||!1:n.programs[r.id]&&n.programs[r.id].has_access||!1),disabled:(t=a,"country"==t.type?0<!o.state.countries[t.id].programs.size||!o.props.store.access.countries[t.id]||"basic_admin"!=o.props.store.access.countries[t.id].role:!o.props.store.access.countries[t.country_id]||"basic_admin"!=o.props.store.access.countries[t.country_id].role),id:a.id,type:a.type,action:"country"==a.type?o.toggleAllProgramsForCountry.bind(o):o.toggleProgramAccess.bind(o)}},cellRenderer:function(e){var t=e.cellData;if("country"!=t.type)return l.a.createElement("div",{className:"check-column"},l.a.createElement("input",{type:"checkbox",checked:t.checked,disabled:t.disabled,onChange:function(){return t.action(t.id)}}));var r=Ve(o.state.countries[t.id],o.state.filtered_programs,o.state.user_program_access)?gettext("Deselect All"):gettext("Select All");return t.disabled?null:l.a.createElement("div",{className:"check-column"},l.a.createElement("a",{className:"edit-user-programs__select-all",onClick:function(e){return t.action(t.id)}},r))}}),l.a.createElement(Se.d,{dataKey:"not_applicable_but_required",label:gettext("Countries and Programs"),width:200,flexGrow:2,cellDataGetter:function(e){var t=e.rowData;return{bold:"country"==t.type,name:t.name}},cellRenderer:function(e){var t=e.cellData;return t.bold?l.a.createElement("strong",null,t.name):l.a.createElement("span",null,t.name)}}),l.a.createElement(Se.d,{width:100,flexGrow:1,dataKey:"not_applicable_but_required",label:gettext("Roles and Permissions"),cellDataGetter:function(e){var t,r=e.rowData;return{id:r.id,disabled:(t=r,"country"==t.type?!o.props.store.is_superuser:!o.props.store.access.countries[t.country_id]||"basic_admin"!=o.props.store.access.countries[t.country_id].role||!o.state.user_program_access.programs[t.id]||!o.state.user_program_access.programs[t.id].has_access),type:r.type,options:r.options,action:"country"==r.type?o.changeCountryRole.bind(o):o.changeProgramRole.bind(o)}},cellRenderer:function(e){var t=e.cellData;return l.a.createElement("select",{disabled:t.disabled,value:function(e){if("country"==e.type){var t=o.state.user_program_access.countries;return t[e.id]?t[e.id].role:o.props.store.country_role_choices[0].value}var r=o.state.user_program_access.programs;return r[e.id]?r[e.id].role:o.props.store.program_role_choices[0].value}(t),onChange:function(e){return t.action(t.id,e.target.value)}},t.options.map(function(e){return l.a.createElement("option",{key:e.value,value:e.value},e.label)}))}}))})))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col"},l.a.createElement("div",{className:"form-group btn-row"},l.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:function(){return o.saveForm()}},"Save Changes"),l.a.createElement("button",{type:"button",className:"btn btn-reset",onClick:function(){return o.resetForm()}},"Reset")))))}}])&&Ce(t.prototype,r),n&&Ce(t,n),o}())||je,Xe=r("H4hL");function Ke(e){return(Ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function We(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(e){Ye(t,e,r[e])})}return t}function Ye(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Je(e,t){return!t||"object"!==Ke(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function Ze(e){return(Ze=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Qe(e,t){return(Qe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function et(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],n=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(n=(i=s.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{n||null==s.return||s.return()}finally{if(a)throw o}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var tt=[{value:!0,label:gettext("Active")},{value:!1,label:gettext("Inactive")}],rt=function(e){var t=e.name,r=(e.type,e.data);return l.a.createElement("p",null,l.a.createElement("strong",null,t),": ",null!=r&&null!=r?r.toString():"N/A")},nt=function(e){var t=e.data,a=e.timeframe;return l.a.createElement("div",null,0<Object.entries(t.countries).length&&l.a.createElement("div",null,l.a.createElement("h3",null,"Countries"),Object.entries(t.countries).map(function(e){var t=et(e,2),r=t[0],n=t[1];return l.a.createElement("div",{key:r,className:"program-changeset-row"},l.a.createElement("p",null,l.a.createElement("strong",null,gettext("Country")),": ",n[a].country),l.a.createElement("p",null,l.a.createElement("strong",null,gettext("Role")),": ",n[a].role))})),0<Object.entries(t.programs).length&&l.a.createElement("div",null,l.a.createElement("h3",null,"Programs"),Object.entries(t.programs).map(function(e){var t=et(e,2),r=t[0],n=t[1];return l.a.createElement("div",{key:r,className:"program-changeset-row"},l.a.createElement("p",null,l.a.createElement("strong",null,gettext("Program")),": ",n[a].program),l.a.createElement("p",null,l.a.createElement("strong",null,gettext("Country")),": ",n[a].country),l.a.createElement("p",null,l.a.createElement("strong",null,gettext("Role")),": ",n[a].role))})))},at=function(e){function r(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),(t=Je(this,Ze(r).call(this,e))).state={original_user_data:e.userData,user_data:We({},e.userData,{user:We({},e.userData.user)})},t}var t,n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Qe(e,t)}(r,l.a.Component),t=r,(n=[{key:"onChange",value:function(e){this.setState({user_data:We({},this.state.user_data,{user:We({},this.state.user_data.user,{is_active:e.value})})})}},{key:"onResendRegistrationEmail",value:function(){this.props.onResendRegistrationEmail()}},{key:"onReset",value:function(){this.setState({user_data:this.state.original_user_data})}},{key:"render",value:function(){var t=this,e=tt.find(function(e){return e.value==t.state.user_data.user.is_active}),r=this.props.history;return l.a.createElement("div",{className:"edit-user-history"},l.a.createElement("h2",null,this.state.user_data.name,": ",gettext("Status and History")),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col"},l.a.createElement(ce.b,{isDisabled:this.props.disabled,options:tt,value:e,onChange:function(e){return t.onChange(e)}}))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col"},l.a.createElement("button",{className:"btn btn-secondary",onClick:function(){return t.onResendRegistrationEmail()}},gettext("Resend Registration Email")))),l.a.createElement("div",{className:"row"},!this.props.disabled&&l.a.createElement("div",{className:"col"},l.a.createElement("div",{className:"form-group btn-row"},l.a.createElement("button",{className:"btn btn-primary",type:"button",onClick:function(){return t.props.onSave(t.state.user_data)}},gettext("Save Changes")),l.a.createElement("button",{className:"btn btn-reset",type:"button",onClick:function(){return t.onReset()}},gettext("Reset"))))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col"},l.a.createElement("table",null,l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,gettext("Date")),l.a.createElement("th",null,gettext("Admin")),l.a.createElement("th",null,gettext("Change Type")),l.a.createElement("th",null,gettext("Previous Entry")),l.a.createElement("th",null,gettext("New Entry")))),l.a.createElement("tbody",null,r.map(function(t){return"user_programs_updated"==t.change_type?l.a.createElement("tr",{key:t.id},l.a.createElement("td",null,t.date),l.a.createElement("td",null,t.admin_user),l.a.createElement("td",null,t.change_type),l.a.createElement("td",{className:"expand-section"},l.a.createElement(Xe.a,null,l.a.createElement(nt,{data:t.diff_list,timeframe:"prev"}))),l.a.createElement("td",{className:"expand-section"},l.a.createElement(Xe.a,null,l.a.createElement(nt,{data:t.diff_list,timeframe:"new"})))):l.a.createElement("tr",{key:t.id},l.a.createElement("td",null,t.date),l.a.createElement("td",null,t.admin_user),l.a.createElement("td",null,t.change_type),l.a.createElement("td",{className:"expand-section"},l.a.createElement(Xe.a,null,t.diff_list.map(function(e){return l.a.createElement(rt,{key:e.name,name:e.name,type:t.change_type,data:e.prev})}))),l.a.createElement("td",{className:"expand-section"},l.a.createElement(Xe.a,null,t.diff_list.map(function(e){return l.a.createElement(rt,{key:e.name,name:e.name,type:t.change_type,data:e.new})}))))}))))))}}])&&$e(t.prototype,n),a&&$e(t,a),r}(),ot=r("RCjz"),it=r("DDFe"),st=r("tnXs"),ct=r("IP2g");function lt(){return(lt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function ut(e){return(ut="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ft(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function mt(e,t,r){return t&&ft(e.prototype,t),r&&ft(e,r),e}function dt(e,t){return!t||"object"!==ut(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function gt(e){return(gt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _t(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ht(e,t)}function ht(e,t){return(ht=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var yt=gettext("None Selected"),bt=Object(se.a)(function(e){var t=e.store,r=e.selections;return l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"users_filter"},gettext("Users")),l.a.createElement(le.a,{value:t.filters.user,options:r,onChange:function(e){return t.changeUserFilter(e)},placeholder:yt,id:"users_filter"}))}),vt=Object(se.a)(function(e){var t=e.store,r=e.selections;return l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"countries_permitted_filter"},gettext("Countries Permitted")),l.a.createElement(le.a,{value:t.filters.countries,options:r,onChange:function(e){return t.changeCountryFilter(e)},placeholder:yt,id:"countries_permitted_filter"}))}),Et=Object(se.a)(function(e){var t=e.store,r=e.selections;return l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"base_country_filter"},gettext("Base Country")),l.a.createElement(le.a,{value:t.filters.base_countries,options:r,onChange:function(e){return t.changeBaseCountryFilter(e)},placeholder:yt,id:"base_country_filter"}))}),Ot=Object(se.a)(function(e){var t=e.store,r=e.selections;return l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"programs_filter"},gettext("Programs")),l.a.createElement(le.a,{value:t.filters.programs,options:r,onChange:function(e){return t.changeProgramFilter(e)},placeholder:yt,id:"programs_filter"}))}),wt=function(e){function r(e){var t;return pt(this,r),(t=dt(this,gt(r).call(this,e))).active_child=l.a.createRef(),t.state={current_action:null,current_vals:[]},t}return _t(r,l.a.Component),mt(r,[{key:"onActionChanged",value:function(e){this.setState({current_action:e.value,current_vals:[]})}},{key:"onChange",value:function(e){this.setState({current_vals:e})}},{key:"onApply",value:function(){var e=this.props.secondaryOptions[this.state.current_action];e&&e.onApply(this.state.current_vals)}},{key:"render",value:function(){var t=this,e=this.props.secondaryOptions[this.state.current_action],r=e&&e.component,n=!this.state.current_action||Array.isArray(this.state.current_vals)&&!this.state.current_vals.length||!this.state.current_vals;return l.a.createElement("div",{className:"bulk-controls"},l.a.createElement("div",{className:"bulk-select"},l.a.createElement(ce.b,{className:"bulk-select",placeholder:gettext("Bulk Actions"),value:this.props.primaryOptions.find(function(e){return e.value==t.state.current_action}),options:this.props.primaryOptions,onChange:function(e){return t.onActionChanged(e)}})),e&&l.a.createElement("div",{className:"bulk-select"},l.a.createElement(r,{value:this.state.current_vals,onChange:function(e){return t.onChange(e)}})),!e&&l.a.createElement("div",{className:"bulk-select"},l.a.createElement(ce.b,{className:"bulk-select",placeholder:"---"})),l.a.createElement("button",{className:"btn btn-secondary",disabled:n,onClick:function(){return t.onApply()}},"Apply"))}}]),r}(),kt=Object(se.a)(function(e){var a=e.store,t=(a.program_selections,{primary_options:[{label:gettext("Set account status"),value:"set_account_status"},{label:gettext("Add to program"),value:"add_to_program"},{label:gettext("Remove from program"),value:"remove_from_program"}],secondary_options:{set_account_status:{component:function(e){return l.a.createElement(ce.b,lt({options:a.user_status_options},e))},onApply:function(e){return a.bulkUpdateUserStatus(e.value)}},add_to_program:{component:function(e){return l.a.createElement(le.a,lt({options:a.program_bulk_selections},e))},onApply:function(e){return a.bulkAddPrograms(e.map(function(e){return e.value}))}},remove_from_program:{component:function(e){return l.a.createElement(le.a,lt({options:a.program_bulk_selections},e))},onApply:function(e){return a.bulkRemovePrograms(e.map(function(e){return e.value}))}}}});return l.a.createElement("div",{id:"user-management-index-view",className:"row"},l.a.createElement(st.a,null,l.a.createElement("div",{className:"filter-section"},l.a.createElement(vt,{store:a,selections:a.countries_selections}),l.a.createElement(Et,{store:a,selections:a.countries_selections}),l.a.createElement(Ot,{store:a,selections:a.program_selections}),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"organization_filter"},gettext("Organization")),l.a.createElement(ce.b,{value:a.filters.organizations,options:a.organization_selections,onChange:function(e){return a.changeOrganizationFilter(e)},isMulti:!0,placeholder:yt,id:"organization_filter"})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"status_filter"},gettext("Status")),l.a.createElement(ce.b,{value:a.filters.user_status,options:a.user_status_options,onChange:function(e){return a.changeUserStatusFilter(e)},placeholder:yt,id:"status_filter"})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"admin_role_filter"},gettext("Admin Role")),l.a.createElement(ce.b,{value:a.filters.admin_role,options:a.admin_role_options,onChange:function(e){return a.changeAdminRoleFilter(e)},placeholder:yt,id:"admin_role_filter"})),l.a.createElement(bt,{store:a,selections:a.user_selections}),l.a.createElement("div",{className:"filter-buttons"},l.a.createElement("button",{className:"btn btn-primary",onClick:function(){return a.applyFilters()}},gettext("Apply")),l.a.createElement("button",{className:"btn btn-inverse",onClick:function(){return a.clearFilters()}},gettext("Reset"))))),l.a.createElement("div",{className:"col list-section"},l.a.createElement("div",{className:"list-controls"},l.a.createElement(wt,{primaryOptions:t.primary_options,secondaryOptions:t.secondary_options}),l.a.createElement("div",null,l.a.createElement("a",{href:"#",tabIndex:"0",className:"btn btn-link btn-add",onClick:function(){return a.createUser()}},l.a.createElement(ct.a,{icon:"plus-circle"}),gettext("Add User")))),l.a.createElement(it.a,{isLoading:a.fetching_users_listing||a.applying_bulk_updates},l.a.createElement("div",{className:"list-table"},l.a.createElement(ue.a,{data:a.users_listing.map(function(e){return a.users[e]}),keyField:"id",HeaderRow:function(e){var t=e.Col,r=e.Row;return l.a.createElement(r,null,l.a.createElement(t,{size:"0.5"},l.a.createElement("div",{className:"td--stretch"},l.a.createElement("input",{type:"checkbox",checked:a.bulk_targets_all,onChange:function(){return a.toggleBulkTargetsAll()}}),l.a.createElement("div",null))),l.a.createElement(t,{size:"2"},gettext("User")),l.a.createElement(t,null,gettext("Organization")),l.a.createElement(t,null,gettext("Programs")),l.a.createElement(t,{size:"0.5"},gettext("Admin Role")),l.a.createElement(t,{size:"0.25"},gettext("Status")))},Row:function(e){var t=e.Col,r=e.Row,n=e.data;return l.a.createElement(r,{expanded:n.id==a.editing_target,Expando:function(e){var t=e.Wrapper;return l.a.createElement(t,null,l.a.createElement(he,{new:"new"==n.id,ProfileSection:Object(se.a)(function(){return l.a.createElement(it.a,{isLoading:a.fetching_editing_target||a.saving_user_profile||a.saving_user_programs},l.a.createElement(Ne,{disabled:1==n.organization_id&&!a.is_superuser&&"new"!=n.id,is_superuser:a.is_superuser,new:"new"==n.id,userData:a.editing_target_data.profile,errors:a.editing_errors,key:a.editing_target_data.profile.id,onUpdate:function(e){return a.updateUserProfile(n.id,e)},onCreate:function(e){return a.saveNewUser(e)},onCreateAndAddAnother:function(e){return a.saveNewUserAndAddAnother(e)},organizations:a.organization_selections}))}),ProgramSection:Object(se.a)(function(){return l.a.createElement(it.a,{isLoading:a.fetching_editing_target||a.saving_user_profile||a.saving_user_programs},l.a.createElement(Ge,{store:a,user:n,adminUserProgramRoles:a.access.program,adminUserCountryRoles:a.access.countries,onSave:function(e){return a.saveUserPrograms(n.id,e)}}))}),HistorySection:Object(se.a)(function(){return l.a.createElement(it.a,{isLoading:a.fetching_editing_target||a.saving_user_profile||a.saving_user_programs},l.a.createElement(at,{disabled:1==n.organization_id&&!a.is_superuser,userData:a.editing_target_data.profile,history:a.editing_target_data.history,onResendRegistrationEmail:function(){return a.resendRegistrationEmail(n.id)},onSave:function(e){return a.updateUserProfile(n.id,e)}}))})}))}},l.a.createElement(t,{size:"0.5"},l.a.createElement("div",{className:"td--stretch"},l.a.createElement("input",{type:"checkbox",checked:a.bulk_targets.get(n.id)||!1,onChange:function(){return a.toggleBulkTarget(n.id)}}),l.a.createElement("div",{className:"icon__clickable",onClick:function(){return a.toggleEditingTarget(n.id)}},l.a.createElement(ct.a,{icon:"user"})))),l.a.createElement(t,{size:"2"},n.name||"---"," ",n.is_super&&l.a.createElement("span",{className:"badge badge-danger"},gettext("Super Admin"))),l.a.createElement(t,null,n.organization_name||"---"),l.a.createElement(t,null,l.a.createElement("a",{href:"/tola_management/program/?users[]=".concat(n.id)},n.user_programs," ",gettext("programs"))),l.a.createElement(t,{size:"0.5"},n.is_admin?gettext("Yes"):gettext("No")),l.a.createElement(t,{size:"0.25"},n.is_active?gettext("Active"):gettext("Inactive")))}}))),l.a.createElement("div",{className:"list-metadata"},l.a.createElement("div",{id:"users-count"},a.users_count?"".concat(a.users_count," ").concat(gettext("users")):"--"),l.a.createElement("div",{id:"pagination-controls"},a.total_pages&&l.a.createElement(ot.a,{pageCount:a.total_pages,initialPage:a.current_page,onPageChange:function(e){return a.changePage(e)}})))))}),jt=new ie(jsContext);o.a.render(l.a.createElement(kt,{store:jt}),document.querySelector("#app_root"))},DDFe:function(e,t,r){"use strict";var n=r("q1tI"),i=r.n(n);function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function c(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],0<=t.indexOf(r)||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],0<=t.indexOf(r)||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}t.a=function(e){var t=e.children,r=e.isLoading,n=e.className,a=c(e,["children","isLoading","className"]),o=r?"loading":"";return i.a.createElement("div",s({className:"loading-spinner__container "+o+" "+(n||"")},a),i.a.createElement("div",{className:"loading-spinner__overlay"},i.a.createElement("div",{className:"loading-spinner__spinner"})),t)}},H4hL:function(e,t,r){"use strict";var n=r("q1tI"),o=r.n(n);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var u=function(e){function r(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),(t=s(this,c(r).call(this,e))).state={expanded:!1,overflowing:!1},t.ref=o.a.createRef(),t}var t,n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(r,o.a.Component),t=r,(n=[{key:"componentDidMount",value:function(){this.ref.current.scrollHeight>this.ref.current.clientHeight&&this.setState({overflowing:!0})}},{key:"toggleExpanded",value:function(e){e.preventDefault(),this.setState({expanded:!this.state.expanded})}},{key:"render",value:function(){var t=this;return o.a.createElement("div",null,o.a.createElement("div",{ref:this.ref,className:"expander",style:{height:!this.state.expanded&&(this.props.height||50)}},this.props.children),this.state.overflowing&&o.a.createElement("div",null,o.a.createElement("a",{href:"",onClick:function(e){return t.toggleExpanded(e)}},this.state.expanded?"Show Less":"Show More")))}}])&&i(t.prototype,n),a&&i(t,a),r}();t.a=u},RCjz:function(e,t,r){"use strict";var n=r("q1tI"),a=r.n(n),o=r("werx"),i=r.n(o);r("okNM");function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}t.a=function(e){return a.a.createElement(i.a,s({previousLabel:a.a.createElement("i",{className:"fa fa-angle-left"}),nextLabel:a.a.createElement("i",{className:"fa fa-angle-right"}),breakLabel:"...",breakClassName:"break-me",marginPagesDisplayed:2,pageRangeDisplayed:5,containerClassName:"pagination",subContainerClassName:"pages pagination",activeClassName:"active"},e))}},TGVD:function(e,t,r){"use strict";var i=r("okNM"),n=r("q1tI"),s=r.n(n);function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function l(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],0<=t.indexOf(r)||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],0<=t.indexOf(r)||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var o=function(e){var t=e.className,r=(e.size,l(e,["className","size"]));return s.a.createElement("td",c({className:["mgmt-table__col",t].join(" ")},r),r.children)},u=function(e){var t=e.className,r=(e.size,l(e,["className","size"]));return s.a.createElement("th",c({className:["mgmt-table__col",t].join(" ")},r),r.children)},p=function(e){var t=e.className,r=l(e,["className"]);return s.a.createElement("tr",c({className:["mgmt-table__row",t].join(" ")},r),r.children)},f=function(e){var t=e.className,r=l(e,["className"]);return s.a.createElement("tr",c({className:["mgmt-table__row table-header",t].join(" ")},r),r.children)},m=Object(i.a)(function(e){var t=e.className,r=e.expanded,n=e.Expando,a=l(e,["className","expanded","Expando"]);if(n){var o=Object(i.a)(n);return s.a.createElement("tbody",c({className:["mgmt-table__body",t].join(" ")},a),s.a.createElement(p,null,a.children),r&&s.a.createElement(o,{Wrapper:d}))}return s.a.createElement("tbody",c({className:["mgmt-table__body",t].join(" ")},a),s.a.createElement(p,null,a.children))}),d=function(e){var t=e.className,r=l(e,["className"]);return s.a.createElement("tr",c({className:["",t].join(" ")},r),s.a.createElement("td",{colSpan:"6"},r.children))},g=Object(i.a)(function(e){var t=e.data,r=e.Row,n=e.keyField,a=(l(e,["data","Row","keyField"]),Object(i.a)(r));return t.map(function(e){return s.a.createElement(a,{key:e[n],data:e,Col:o,Row:m})})}),a=Object(i.a)(function(e){var t=e.HeaderRow,r=e.className,n=l(e,["HeaderRow","className"]),a=Object(i.a)(t);return s.a.createElement("table",{className:["table bg-white",r].join(" ")},s.a.createElement("thead",null,s.a.createElement(a,{Col:u,Row:f})),s.a.createElement(g,n))});t.a=a},XoI5:function(e,t,r){"use strict";r.d(t,"a",function(){return a});var n=r("vDqi"),a=r.n(n).a.create({withCredentials:!0,baseURL:"/api/",headers:{"X-CSRFToken":document.cookie.replace(/(?:(?:^|.*;\s*)csrftoken\s*\=\s*([^;]*).*$)|^.*$/,"$1")}})},Z2Y6:function(e,t,r){"use strict";var n=r("q1tI"),a=r.n(n),o=r("y2Vs"),i=r("5Xg7"),s=r("okNM");function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var l=function(e){return o.a.Option&&a.a.createElement(o.a.Option,e,a.a.createElement("input",{className:"checkboxed-multi-select-checkbox",type:"checkbox",checked:e.isSelected,onChange:function(e){}}),"",e.data.label)},u=Object(s.a)(function(e){return a.a.createElement(o.b,c({isMulti:!0,closeMenuOnSelect:!1,hideSelectedOptions:!1,components:{MenuList:i.a,Option:l}},e))});t.a=u},tnXs:function(e,t,r){"use strict";var n=r("q1tI"),o=r.n(n);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function s(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],0<=t.indexOf(r)||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],0<=t.indexOf(r)||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f=function(e){function r(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),(t=l(this,u(r).call(this,e))).state={folded:!1},t}var t,n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(r,o.a.Component),t=r,(n=[{key:"toggleFolded",value:function(){this.setState({folded:!this.state.folded})}},{key:"render",value:function(){var e=this,t=this.props,r=t.className,n=s(t,["className"]),a=this.state.folded?"fa-chevron-right":"fa-chevron-left";return o.a.createElement("div",i({className:"folding-sidebar "+(r||"")},n),!this.state.folded&&o.a.createElement(o.a.Fragment,null,this.props.children),o.a.createElement("div",{className:"folding-sidebar__trigger",onClick:function(){return e.toggleFolded()}},o.a.createElement("i",{key:a},o.a.createElement("span",{className:"fa "+a}))))}}])&&c(t.prototype,n),a&&c(t,a),r}();t.a=f}},[["9KAa",0,1]]]);